version: 2.1
orbs:
  node: circleci/node@4.7.0

jobs:
  codecov:
    executor:
      name: node/default
      tag: '17'
    steps:
      - checkout
      - run: npm run test
      - run: curl -Os https://uploader.codecov.io/latest/linux/codecov
      - run: chmod +x codecov
      - run: ./codecov

workflows:
  upload-to-codecov:
    jobs:
      - codecov